<!DOCTYPE html>
<html>
	<head>
		<title>Mappa Campus</title>
		<meta name="author" content="Gaetano Bonofiglio, Lorenzo Ariemma, Tucci's PC">
		<style>
            /*! normalize.css v3.0.2 | MIT License | git.io/normalize */

            /**
             * 1. Set default font family to sans-serif.
             * 2. Prevent iOS text size adjust after orientation change, without disabling
             *    user zoom.
             */

            html {
                font-family: sans-serif; /* 1 */
                -ms-text-size-adjust: 100%; /* 2 */
                -webkit-text-size-adjust: 100%; /* 2 */
            }

            /**
             * Remove default margin.
             */

            body {
                margin: 0;
            }

            /* HTML5 display definitions
               ========================================================================== */

            /**
             * Correct `block` display not defined for any HTML5 element in IE 8/9.
             * Correct `block` display not defined for `details` or `summary` in IE 10/11
             * and Firefox.
             * Correct `block` display not defined for `main` in IE 11.
             */

            article,
            aside,
            details,
            figcaption,
            figure,
            footer,
            header,
            hgroup,
            main,
            menu,
            nav,
            section,
            summary {
                display: block;
            }

            /**
             * 1. Correct `inline-block` display not defined in IE 8/9.
             * 2. Normalize vertical alignment of `progress` in Chrome, Firefox, and Opera.
             */

            audio,
            canvas,
            progress,
            video {
                display: inline-block; /* 1 */
                vertical-align: baseline; /* 2 */
            }

            /**
             * Prevent modern browsers from displaying `audio` without controls.
             * Remove excess height in iOS 5 devices.
             */

            audio:not([controls]) {
                display: none;
                height: 0;
            }

            /**
             * Address `[hidden]` styling not present in IE 8/9/10.
             * Hide the `template` element in IE 8/9/11, Safari, and Firefox < 22.
             */

            [hidden],
            template {
                display: none;
            }

            /* Links
               ========================================================================== */

            /**
             * Remove the gray background color from active links in IE 10.
             */

            a {
                background-color: transparent;
            }

            /**
             * Improve readability when focused and also mouse hovered in all browsers.
             */

            a:active,
            a:hover {
                outline: 0;
            }

            /* Text-level semantics
               ========================================================================== */

            /**
             * Address styling not present in IE 8/9/10/11, Safari, and Chrome.
             */

            abbr[title] {
                border-bottom: 1px dotted;
            }

            /**
             * Address style set to `bolder` in Firefox 4+, Safari, and Chrome.
             */

            b,
            strong {
                font-weight: bold;
            }

            /**
             * Address styling not present in Safari and Chrome.
             */

            dfn {
                font-style: italic;
            }

            /**
             * Address variable `h1` font-size and margin within `section` and `article`
             * contexts in Firefox 4+, Safari, and Chrome.
             */

            h1 {
                font-size: 2em;
                margin: 0.67em 0;
            }

            /**
             * Address styling not present in IE 8/9.
             */

            mark {
                background: #ff0;
                color: #000;
            }

            /**
             * Address inconsistent and variable font size in all browsers.
             */

            small {
                font-size: 80%;
            }

            /**
             * Prevent `sub` and `sup` affecting `line-height` in all browsers.
             */

            sub,
            sup {
                font-size: 75%;
                line-height: 0;
                position: relative;
                vertical-align: baseline;
            }

            sup {
                top: -0.5em;
            }

            sub {
                bottom: -0.25em;
            }

            /* Embedded content
               ========================================================================== */

            /**
             * Remove border when inside `a` element in IE 8/9/10.
             */

            img {
                border: 0;
            }

            /**
             * Correct overflow not hidden in IE 9/10/11.
             */

            svg:not(:root) {
                overflow: hidden;
            }

            /* Grouping content
               ========================================================================== */

            /**
             * Address margin not present in IE 8/9 and Safari.
             */

            figure {
                margin: 1em 40px;
            }

            /**
             * Address differences between Firefox and other browsers.
             */

            hr {
                -moz-box-sizing: content-box;
                box-sizing: content-box;
                height: 0;
            }

            /**
             * Contain overflow in all browsers.
             */

            pre {
                overflow: auto;
            }

            /**
             * Address odd `em`-unit font size rendering in all browsers.
             */

            code,
            kbd,
            pre,
            samp {
                font-family: monospace, monospace;
                font-size: 1em;
            }

            /* Forms
               ========================================================================== */

            /**
             * Known limitation: by default, Chrome and Safari on OS X allow very limited
             * styling of `select`, unless a `border` property is set.
             */

            /**
             * 1. Correct color not being inherited.
             *    Known issue: affects color of disabled elements.
             * 2. Correct font properties not being inherited.
             * 3. Address margins set differently in Firefox 4+, Safari, and Chrome.
             */

            button,
            input,
            optgroup,
            select,
            textarea {
                color: inherit; /* 1 */
                font: inherit; /* 2 */
                margin: 0; /* 3 */
            }

            /**
             * Address `overflow` set to `hidden` in IE 8/9/10/11.
             */

            button {
                overflow: visible;
            }

            /**
             * Address inconsistent `text-transform` inheritance for `button` and `select`.
             * All other form control elements do not inherit `text-transform` values.
             * Correct `button` style inheritance in Firefox, IE 8/9/10/11, and Opera.
             * Correct `select` style inheritance in Firefox.
             */

            button,
            select {
                text-transform: none;
            }

            /**
             * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
             *    and `video` controls.
             * 2. Correct inability to style clickable `input` types in iOS.
             * 3. Improve usability and consistency of cursor style between image-type
             *    `input` and others.
             */

            button,
            html input[type="button"], /* 1 */
            input[type="reset"],
            input[type="submit"] {
                -webkit-appearance: button; /* 2 */
                cursor: pointer; /* 3 */
            }

            /**
             * Re-set default cursor for disabled elements.
             */

            button[disabled],
            html input[disabled] {
                cursor: default;
            }

            /**
             * Remove inner padding and border in Firefox 4+.
             */

            button::-moz-focus-inner,
            input::-moz-focus-inner {
                border: 0;
                padding: 0;
            }

            /**
             * Address Firefox 4+ setting `line-height` on `input` using `!important` in
             * the UA stylesheet.
             */

            input {
                line-height: normal;
            }

            /**
             * It's recommended that you don't attempt to style these elements.
             * Firefox's implementation doesn't respect box-sizing, padding, or width.
             *
             * 1. Address box sizing set to `content-box` in IE 8/9/10.
             * 2. Remove excess padding in IE 8/9/10.
             */

            input[type="checkbox"],
            input[type="radio"] {
                box-sizing: border-box; /* 1 */
                padding: 0; /* 2 */
            }

            /**
             * Fix the cursor style for Chrome's increment/decrement buttons. For certain
             * `font-size` values of the `input`, it causes the cursor style of the
             * decrement button to change from `default` to `text`.
             */

            input[type="number"]::-webkit-inner-spin-button,
            input[type="number"]::-webkit-outer-spin-button {
                height: auto;
            }

            /**
             * 1. Address `appearance` set to `searchfield` in Safari and Chrome.
             * 2. Address `box-sizing` set to `border-box` in Safari and Chrome
             *    (include `-moz` to future-proof).
             */

            input[type="search"] {
                -webkit-appearance: textfield; /* 1 */
                -moz-box-sizing: content-box;
                -webkit-box-sizing: content-box; /* 2 */
                box-sizing: content-box;
            }

            /**
             * Remove inner padding and search cancel button in Safari and Chrome on OS X.
             * Safari (but not Chrome) clips the cancel button when the search input has
             * padding (and `textfield` appearance).
             */

            input[type="search"]::-webkit-search-cancel-button,
            input[type="search"]::-webkit-search-decoration {
                -webkit-appearance: none;
            }

            /**
             * Define consistent border, margin, and padding.
             */

            fieldset {
                border: 1px solid #c0c0c0;
                margin: 0 2px;
                padding: 0.35em 0.625em 0.75em;
            }

            /**
             * 1. Correct `color` not being inherited in IE 8/9/10/11.
             * 2. Remove padding so people aren't caught out if they zero out fieldsets.
             */

            legend {
                border: 0; /* 1 */
                padding: 0; /* 2 */
            }

            /**
             * Remove default vertical scrollbar in IE 8/9/10/11.
             */

            textarea {
                overflow: auto;
            }

            /**
             * Don't inherit the `font-weight` (applied by a rule above).
             * NOTE: the default cannot safely be changed in Chrome and Safari on OS X.
             */

            optgroup {
                font-weight: bold;
            }

            /* Tables
               ========================================================================== */

            /**
             * Remove most spacing between table cells.
             */

            table {
                border-collapse: collapse;
                border-spacing: 0;
            }

            td,
            th {
                padding: 0;
            }

            /* Mappa Campus css */

            ::-moz-selection {
                background: rgba(255,255,255,0);
            }
            ::selection {
                background: rgba(255,255,255,0);
            }
			div {
				display: inline;
				margin: 0; padding: 0;
			}
			input[type=checkbox] {
                position: absolute;
                top: -9999px;
                left: -9999px;
			}
			label { 
                -webkit-appearance: push-button;
                -moz-appearance: button; 
                display: inline-block;
                cursor: pointer;
                background: green;
                padding: 10px 20px;
                margin: 0;

                -webkit-transition: background 0.5s; /* Safari */
                transition: background 0.5s;
			}
			label div {
                display: inline-block;
                font-family: arial, Tahoma;
                font-weight: bold;
                outline: 0px none !important;
                border: 1px solid #999 !important;
                color: #444;
                background: transparent linear-gradient(to bottom, #EEE, #CCC) repeat scroll 0% 0%;
                white-space: nowrap;
                padding-top: 5px; padding-bottom: 5px;
                line-height: 1.4;
                position: relative;
                height: 20px;
                width: 40px;
                text-align: center;
                overflow: hidden;
                border-radius: 0;
			}
			/* Toggled State */
			input[type=checkbox]:checked ~ label{
                background: red;
			}
			table td {
                height: 56px;
                width: 82px;
                table-layout: fixed;
			}
            table {
                width: 1066px;
                margin: 30px auto;
            }
            button {
                margin: 30px;
                display: inline-block;
                font-family: arial, Tahoma;
                font-weight: bold;
                outline: 0px none !important;
                border: 1px solid #999 !important;
                color: #444;
                height: 40px;
                padding: 10px;
            }
		</style>
        <script>
            function makeurl(element) {
                var checkedValue = "";
                var inputElements = document.getElementsByClassName('check');
                for (var i = 0; i < inputElements.length ; ++i) {
                    //fix because onclick is faster then actual checkbox
                    var id = element.getAttribute("for");
                    var actualElement = document.getElementById(id);
                    if(actualElement===inputElements[i]) {
                        if (actualElement.checked)
                            checkedValue = checkedValue + "0";
                        else
                            checkedValue = checkedValue + "1";
                    }
                    else {
                        if (inputElements[i].checked) {
                            checkedValue = checkedValue + "1";
                        }
                        else {
                            checkedValue = checkedValue + "0";
                        }
                    }
                }
                return checkedValue;
            }
            function writeurl(url) {
                document.location.hash = "#" + encodeURI(url);
            }
            function reseturl() {
                document.location.hash = "#";
            }
            function makeandwriteurl(element) {
                writeurl(makeurl(element));
            }
            function readurl() {
                if(typeof(window.location.href.split("#")[1]) != "undefined") {
                    var urlCodeApp = window.location.href.split("#")[1];
                    urlCodeApp=decodeURI(urlCodeApp);
                    var urlCodeArr = [];
                    for (var i = 0; i < urlCodeApp.length; i++) {
                        urlCodeArr[i] = parseInt(urlCodeApp.charCodeAt(i));
                    }
                    return urlCodeArr;
                }
                return [];
            }
            function applyurl(imp, urlarray){
                if (urlarray == []) return;
                var inputElements = document.getElementsByClassName('check');
                for (var i = 0; i < inputElements.length; ++i) {
                    if (urlarray[i]-imp[1]==10) {
                        inputElements[i].checked = true;
                    }
                    else {
                        inputElements[i].checked = false;
                    }
                }
            }
            function readandapplyurl(imp) {
                applyurl(imp, readurl());
            }

            function init(imp, imp_c) {
                var matrix = [
                    [0 ,25,0 ,24,17,0 ,0 ,15,13,0 ,12,11,10],
                    [0 ,26,0 ,23,18,0 ,0 ,16,14,0 ,0 ,0 ,9 ],
                    [0 ,0 ,0 ,22,19,0 ,0 ,0 ,0 ,0 ,0 ,0 ,8 ],
                    [0 ,0 ,0 ,21,20,0 ,0 ,0 ,0 ,0 ,0 ,0 ,7 ],
                    [0 ,0 ,0 ,0 ,0 ,0 ,47,48,49,50,0 ,0 ,6 ],
                    [0 ,0 ,0 ,0 ,0 ,0 ,46,45,44,43,0 ,0 ,5 ],
                    [0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,4 ],
                    [27,28,0 ,31,32,0 ,42,41,40,39,0 ,0 ,3 ],
           ["29-B","30-B", 0 ,33,34,0 ,35,36,37,38,0 ,0 ,2 ],
                    [0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,0 ,1 ],
                    [0 ,0 ,0 ,0 ,0 ,0 ,54,53,52,51,0 ,0 ,0 ]
                ];

                var template='<div><input type="checkbox" class="check" id="toggle-!!NUM!!">' +
                '<label onclick="makeandwriteurl(this)" for="toggle-!!NUM!!"!!STYLE!!><div>!!NUM!!</div></label></div>';

                var styleForB = ' style="background: blue;"';

                var table = "<table>";
                for (var i = 0; i<matrix.length; ++i ){
                    table += "<tr>";
                    for (var j = 0; j<matrix[i].length; ++j ){
                        table += "<td>";
                        if(matrix[i][j]!=0){
                            table += template.replace(new RegExp("!!NUM!!", 'g'), matrix[i][j]).replace("!!STYLE!!", (typeof matrix[i][j] == "string" && matrix[i][j].indexOf("-B")>-1)? styleForB:"");
                        }
                        table += "</td>";
                    }
                    table += "</tr>";
                }
                table += "</table>";
                document.getElementById("campus").innerHTML += table;

                var imp2 = "";
                for (var i = 0; i < imp.length; ++i) {
                    imp2 = imp2 + String.fromCharCode(imp[i]);
                }
                imp2 = imp2 + "\n";
                for (var i = 0; i < imp_c.length; ++i) {
                    imp2 = imp2 + String.fromCharCode(imp_c[i]);
                }
                console.log(imp2);
                readandapplyurl(imp);
            }
        </script>
	</head>
	<body>
    <form id="campus">
        <button type="reset" value="Reset" onclick="reseturl()">Reset</button>
    </form>
	</body>
    <script>
        var imp = [76,39,97,117,116,111,114,101,32,100,105,32,113,117,101,115,116,111,32,115,99,114,105,112,116,32,232,32,71,97,101,116,97,110,111,32,66,111,110,111,102,105,103,108,105,111,32,101,32,84,117,99,99,105,32,110,111,110,32,104,97,32,102,97,116,116,111,32,110,117,108,108,97];
        var imp_c = [];
        window.onload = init(imp, imp_c);
    </script>
</html>


